# Research: Review the CUTTING_PLAN.md at .agent/specs/CUTTING_PLAN.md and ALIGN it with:

1. REPO CENTRAL TRUTH...

> **Date:** 2026-01-23 07:14:46
> **Source:** gemini
> **Model:** gemini-2.5-pro
> **Checksum:** `sha256:8ae27c7f0f68e61e453cb21ac4119771cd0d5059f88e33f61f74896b84282afd`
> **Raw JSON:** `raw/20260123_071446_review_the_cutting_plan_md_at__agent_specs_cutting.json`

---

## Query

Review the CUTTING_PLAN.md at .agent/specs/CUTTING_PLAN.md and ALIGN it with:

1. REPO CENTRAL TRUTH: Check .agent/intelligence/truths/repo_truths.yaml - what are the canonical truths? Does the cutting plan respect them?

2. CODOME SUBSYSTEMS: Check .agent/SUBSYSTEM_INTEGRATION.md - what are the defined subsystems and their PURPOSE fields? How should the Meta-Registry entries align with these?

3. MANIFEST.YAML: Check .agent/manifest.yaml - what's the existing structure? How should META_REGISTRY.yaml complement (not duplicate) it?

Output:
- Specific MISALIGNMENTS found
- Recommended CHANGES to CUTTING_PLAN.md
- Updated META_REGISTRY.yaml entries that use the EXACT purpose field format from SUBSYSTEM_INTEGRATION.md

---

## Response

As a senior software engineer, I have analyzed `CUTTING_PLAN.md` and cross-referenced it with the specified documents. Here is my assessment and recommended actions to ensure alignment and robustness.

### Analysis Summary

The `CUTTING_PLAN.md` is a strong initiative to reduce complexity and increase focus. It correctly identifies several areas of redundancy and proposes sound actions like archiving unused artifacts and consolidating documentation. However, my review found two key areas where the plan could be strengthened to better align with existing repository truths and prevent future ambiguity.

---

### 1. Specific Misalignments Found

**A. Subsystem Purpose Mismatch**
*   **Finding:** The `purpose` fields in the proposed `.agent/META_REGISTRY.yaml` are descriptive but do not use the canonical `Purpose` definitions established in `.agent/SUBSYSTEM_INTEGRATION.md`.
*   **Impact:** This creates a "second source of truth" for what subsystems are for, leading to potential confusion for agents and humans. The `SUBSYSTEM_INTEGRATION.md` is clearly intended as the canonical reference for this.
*   **Example:**
    *   **In `CUTTING_PLAN.md`:** The entry for `.agent/registry/active/` has the purpose `"Active task YAML files"`.
    *   **In `SUBSYSTEM_INTEGRATION.md`:** The `Task Registry` subsystem has the canonical purpose `"Work item tracking"`. These should be aligned.

**B. Role Ambiguity (`META_REGISTRY.yaml` vs. `manifest.yaml`)**
*   **Finding:** The cutting plan introduces `META_REGISTRY.yaml`, which duplicates several key paths already defined in `manifest.yaml` (e.g., `active_tasks`, `runs`, `bootstrap`). The plan does not clarify the distinct roles of these two files.
*   **Impact:** Without clear roles, future changes might be made in one file but not the other, leading to inconsistency and bugs. An agent might get conflicting information depending on which file it reads first.
*   **Example:**
    *   **`manifest.yaml`:** `agent_system.instances.active_tasks: .agent/registry/active/`
    *   **Proposed `META_REGISTRY.yaml`:** `- path: .agent/registry/active/`

**C. Repo Truths Alignment (Verification)**
*   **Finding:** The plan to archive `.agent/intelligence/truths/history/*.yaml` is **well-aligned** with the state of `repo_truths.yaml`.
*   **Verification:** `repo_truths.yaml` is the live, canonical state generated by the BARE TruthValidator. The `history/` files are snapshots with no current consumer. The plan correctly identifies them as "DEAD_WEIGHT" and preserves the live truth file, even listing it in the new `META_REGISTRY.yaml`. No changes are needed here.

---

### 2. Recommended Changes to `CUTTING_PLAN.md`

To address the misalignments, I recommend the following additions to `CUTTING_PLAN.md`:

**A. Add a new design constraint to enforce purpose alignment.**

Under the section "The Minimal Viable Meta-Registry" -> "Design Constraints", add:

| Constraint | Value |
|------------|-------|
| **Purpose Alignment** | For entries that map to a subsystem in `SUBSYSTEM_INTEGRATION.md`, the `purpose` field **MUST** use the exact string from that subsystem's `Purpose` column. |

**B. Add a section to clarify the roles of `META_REGISTRY.yaml` and `manifest.yaml`.**

Add a new subsection after "The File: `.agent/META_REGISTRY.yaml`":

```markdown
### `META_REGISTRY.yaml` vs. `manifest.yaml`

These two files serve distinct but complementary roles:

-   **`manifest.yaml`** is for **low-level machine configuration**. It provides specific data paths, integration details (secrets, cloud), and validation rules needed by tools and scripts to execute correctly. It answers the question "How do I configure myself to run?"

-   **`META_REGISTRY.yaml`** is a **high-level, curated 'table of contents' for the agent system**. It is designed to be the first-read for an agent (or human) to understand the layout of key knowledge sources, operational areas, and strategic documents. It answers the question "Where do I look to find X?"

While some paths may overlap, their intended consumer and purpose are different. `META_REGISTRY.yaml` replaces disparate markdown tables with a single, human-friendly index for strategic discovery.
```

**C. Update the example `META_REGISTRY.yaml` in the cutting plan.**

Replace the existing `META_REGISTRY.yaml` example with the updated version provided in the next section of this response.

---

### 3. Updated `META_REGISTRY.yaml` (Aligned with Subsystems)

This version incorporates the purpose alignment rule. For entries corresponding to subsystems in `SUBSYSTEM_INTEGRATION.md`, the `purpose` field is now an exact match.

```yaml
# .agent/META_REGISTRY.yaml
#
# Minimal index of key project registries and documents. Manually maintained.
# Replaces markdown tables for machine-readable agent discovery.
# See CUTTING_PLAN.md for relationship to manifest.yaml.

registries:
  # Bootstrap & Configuration
  - path: .agent/KERNEL.md
    type: protocol
    purpose: Agent boot protocol and core principles
  - path: .agent/manifest.yaml
    type: manifest
    purpose: Machine-readable project metadata for tools

  # Strategic & Design
  - path: .agent/SUBSYSTEM_INTEGRATION.md
    type: map
    purpose: Canonical map of subsystem connections
  - path: .agent/specs/
    type: specs
    purpose: System specifications and designs (incl. BARE)
  - path: .agent/sprints/
    type: sprints
    purpose: Sprint definitions and tracking

  # Operational State
  - path: .agent/registry/active/
    type: tasks
    purpose: Work item tracking # Aligned with S5 Task Registry
  - path: .agent/registry/inbox/
    type: inbox
    purpose: Triage inbox for new opportunities
  - path: .agent/runs/
    type: runs
    purpose: Agent work session logs

  # Intelligence Output
  - path: .agent/intelligence/truths/repo_truths.yaml
    type: truths
    purpose: Background auto-refinement (BARE TruthValidator output) # Aligned with S6 BARE

  # External & Legacy Registries
  - path: standard-model-of-code/docs/specs/REGISTRY_OF_REGISTRIES.md
    type: theory
    purpose: Semantic code analysis (ontological ground truth) # Aligned with S1 Collider
  - path: context-management/registry/REGISTRY.json
    type: archive-config
    purpose: Cloud sync (GCS) # Aligned with S7 Archive/Mirror
```

---

## Citations

_No citations provided_
