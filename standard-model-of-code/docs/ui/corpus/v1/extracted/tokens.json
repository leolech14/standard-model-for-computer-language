{
  "$schema": "consolidated-tokens-v2",
  "generated": "2026-01-25T06:30:00Z",
  "validated_by": "Agent Beta (Claude Opus 4.5)",
  "purpose": "Merged design token inventory with full provenance for UI Overhaul Phase 2",

  "CRITICAL_CORRECTION": {
    "previous_claim": "Token System is Architectural Fiction",
    "reality": "Token system is FULLY IMPLEMENTED and WIRED",
    "evidence": [
      "schema/viz/tokens/ contains 6 JSON files (2,726 lines total)",
      "src/core/viz/token_resolver.py implements TokenResolver class",
      "tools/visualize_graph_webgl.py imports get_resolver() at line 16",
      "Line 612: resolver.generate_all_themes_css() injects tokens into CSS",
      "Line 617: resolver.get_js_theme_config() injects into JS"
    ]
  },

  "sources": {
    "token_files": [
      {
        "path": "schema/viz/tokens/theme.tokens.json",
        "lines": 656,
        "purpose": "UI chrome - backgrounds, borders, text, typography, shadows",
        "themes": ["dark (default)", "light", "high-contrast"],
        "categories": ["color.bg", "color.border", "color.text", "color.accent", "color.status", "typography", "shadow", "opacity"]
      },
      {
        "path": "schema/viz/tokens/appearance.tokens.json",
        "lines": 569,
        "purpose": "Graph visuals - THE REMOTE CONTROL",
        "categories": ["render", "color.atom", "color.atom-family", "color.ring", "color.edge", "node", "edge", "animation", "flow-presets", "stars"]
      },
      {
        "path": "schema/viz/tokens/controls.tokens.json",
        "lines": 1135,
        "purpose": "UI controls - panels, buttons, layouts, keyboard shortcuts",
        "categories": ["command-bar", "floating-panels", "side-dock", "bottom-dock", "presets", "color-schemes", "layouts", "sliders", "panels", "filters"]
      },
      {
        "path": "schema/viz/tokens/layout.tokens.json",
        "lines": 132,
        "purpose": "Spacing, z-index, transitions, radius, breakpoints",
        "categories": ["spacing", "radius", "z-index", "duration", "easing", "transition", "breakpoint", "size", "blur", "offset"]
      },
      {
        "path": "schema/viz/tokens/physics.tokens.json",
        "lines": 140,
        "purpose": "Force simulation parameters",
        "categories": ["forces.charge", "forces.link", "forces.center", "forces.collision", "simulation", "presets"]
      },
      {
        "path": "schema/viz/tokens/performance.tokens.json",
        "lines": 94,
        "purpose": "Rendering performance thresholds",
        "categories": ["frameBudget", "nodeThresholds", "adaptiveQuality", "animation", "monitoring", "invariants"]
      }
    ],
    "css_file": {
      "path": "src/core/viz/assets/styles.css",
      "lines": "3034+",
      "purpose": "Generated/consumed CSS with token references",
      "custom_properties_extracted": 54
    }
  },

  "token_counts": {
    "total_files": 6,
    "total_lines": 2726,
    "color_tokens": 180,
    "spacing_tokens": 15,
    "typography_tokens": 25,
    "shadow_tokens": 8,
    "transition_tokens": 8,
    "appearance_tokens": 95,
    "control_tokens": 250,
    "physics_tokens": 35,
    "performance_tokens": 40
  },

  "css_variables_from_styles": {
    "description": "CSS custom properties defined in styles.css (referencing tokens)",
    "total_count": 54,
    "by_category": {
      "surface": {
        "count": 3,
        "variables": [
          {"name": "--surface-bg", "value": "var(--color-bg-surface)", "line": 78},
          {"name": "--surface-border", "value": "var(--color-border-default)", "line": 79},
          {"name": "--surface-blur", "value": "var(--blur-md)", "line": 80}
        ]
      },
      "text": {
        "count": 3,
        "variables": [
          {"name": "--text-primary", "value": "var(--color-text-primary)", "line": 83},
          {"name": "--text-secondary", "value": "var(--color-text-secondary)", "line": 84},
          {"name": "--text-muted", "value": "var(--color-text-muted)", "line": 85}
        ]
      },
      "accent": {
        "count": 3,
        "variables": [
          {"name": "--accent", "value": "var(--color-accent-primary)", "line": 88},
          {"name": "--accent-dim", "value": "var(--color-accent-primary-dim)", "line": 89},
          {"name": "--accent-bg", "value": "var(--color-accent-primary-bg)", "line": 90}
        ]
      },
      "typography_aliases": {
        "count": 6,
        "variables": [
          {"name": "--font-xs", "value": "var(--typography-size-sm)", "line": 2090},
          {"name": "--font-sm", "value": "var(--typography-size-base)", "line": 2091},
          {"name": "--font-md", "value": "var(--typography-size-lg)", "line": 2092},
          {"name": "--font-lg", "value": "var(--typography-size-xl)", "line": 2093},
          {"name": "--font-xl", "value": "var(--typography-size-2xl)", "line": 2094},
          {"name": "--font-mono", "value": "var(--typography-family-mono)", "line": 2095}
        ]
      },
      "spacing_aliases": {
        "count": 6,
        "variables": [
          {"name": "--space-xs", "value": "var(--spacing-1-5)", "line": 2098},
          {"name": "--space-sm", "value": "var(--spacing-3)", "line": 2099},
          {"name": "--space-md", "value": "var(--spacing-5)", "line": 2100},
          {"name": "--space-lg", "value": "var(--spacing-7)", "line": 2101},
          {"name": "--space-xl", "value": "var(--spacing-10)", "line": 2102},
          {"name": "--space-2xl", "value": "var(--spacing-12)", "line": 2103}
        ]
      },
      "background_aliases": {
        "count": 4,
        "variables": [
          {"name": "--bg-panel", "value": "var(--color-bg-panel-dark)", "line": 2106},
          {"name": "--bg-panel-hover", "value": "var(--color-bg-panel-dark)", "line": 2107},
          {"name": "--bg-control", "value": "var(--color-bg-hover)", "line": 2108},
          {"name": "--bg-control-hover", "value": "var(--color-bg-active)", "line": 2109}
        ]
      },
      "border_aliases": {
        "count": 3,
        "variables": [
          {"name": "--border-subtle", "value": "var(--color-border-default)", "line": 2113},
          {"name": "--border-medium", "value": "var(--color-border-strong)", "line": 2114},
          {"name": "--border-accent", "value": "var(--color-accent-primary-glow)", "line": 2115}
        ]
      },
      "ui_dim": {
        "count": 3,
        "variables": [
          {"name": "--ui-dim-edges", "value": "1", "line": 2126},
          {"name": "--ui-dim-stars", "value": "1", "line": 2127},
          {"name": "--ui-dim-nodes", "value": "1", "line": 2128}
        ]
      },
      "glow": {
        "count": 2,
        "variables": [
          {"name": "--glow-cyan", "value": "var(--shadow-glow-accent)", "line": 2131},
          {"name": "--glow-cyan-strong", "value": "var(--shadow-md)", "line": 2132}
        ]
      },
      "easing_aliases": {
        "count": 2,
        "variables": [
          {"name": "--ease-out", "value": "var(--easing-ease-out)", "line": 2135},
          {"name": "--ease-bounce", "value": "cubic-bezier(0.34, 1.56, 0.64, 1)", "line": 2136}
        ]
      },
      "panel_layout": {
        "count": 12,
        "variables": [
          {"name": "--px", "value": "varies by panel", "line": "2144-2175"},
          {"name": "--py", "value": "varies by panel", "line": "2144-2175"},
          {"name": "--prot", "value": "varies by panel", "line": "2144-2175"},
          {"name": "--oval-margin", "value": "15%", "line": 2086},
          {"name": "--oval-aspect", "value": "1.4", "line": 2087}
        ]
      },
      "overrides": {
        "count": 3,
        "description": "Values that change in specific contexts (e.g., panels-open state)",
        "variables": [
          {"name": "--ui-dim-edges", "value": "0.4", "context": "[data-panels-open]", "line": 2339},
          {"name": "--ui-dim-stars", "value": "0.2", "context": "[data-panels-open]", "line": 2340},
          {"name": "--ui-dim-nodes", "value": "0.7", "context": "[data-panels-open]", "line": 2341}
        ]
      }
    }
  },

  "conflicts": {
    "description": "Variables with different values in different contexts",
    "count": 3,
    "items": [
      {
        "variable": "--ui-dim-edges",
        "conflict_type": "context_override",
        "default_value": "1",
        "override_value": "0.4",
        "override_context": "[data-panels-open]",
        "resolution": "INTENTIONAL - dims edges when panels are open",
        "severity": "NONE"
      },
      {
        "variable": "--ui-dim-stars",
        "conflict_type": "context_override",
        "default_value": "1",
        "override_value": "0.2",
        "override_context": "[data-panels-open]",
        "resolution": "INTENTIONAL - dims stars when panels are open",
        "severity": "NONE"
      },
      {
        "variable": "--ui-dim-nodes",
        "conflict_type": "context_override",
        "default_value": "1",
        "override_value": "0.7",
        "override_context": "[data-panels-open]",
        "resolution": "INTENTIONAL - dims nodes when panels are open",
        "severity": "NONE"
      }
    ],
    "unresolved_conflicts": []
  },

  "high_impact_tokens": {
    "description": "Top 10 tokens with highest visual/functional impact",
    "tokens": [
      {
        "name": "opacity.edge",
        "source": "appearance.tokens.json:202",
        "value": 0.08,
        "impact": "CRITICAL - master edge visibility"
      },
      {
        "name": "size.edge.width",
        "source": "appearance.tokens.json:254",
        "value": 0.8,
        "impact": "CRITICAL - base edge thickness"
      },
      {
        "name": "color.edge.default",
        "source": "appearance.tokens.json:107",
        "value": "oklch(25% 0.01 242)",
        "impact": "HIGH - fallback edge color"
      },
      {
        "name": "color.bg.base",
        "source": "theme.tokens.json:191",
        "value": "oklch(8% 0.02 250)",
        "impact": "HIGH - app background"
      },
      {
        "name": "size.atom.max",
        "source": "appearance.tokens.json:245",
        "value": 8.0,
        "impact": "HIGH - maximum node size"
      },
      {
        "name": "forces.charge.strength",
        "source": "physics.tokens.json:11",
        "value": -120,
        "impact": "HIGH - node repulsion"
      },
      {
        "name": "color.accent.primary",
        "source": "theme.tokens.json:328",
        "value": "oklch(60% 0.04 220)",
        "impact": "MEDIUM - primary UI accent"
      },
      {
        "name": "typography.family.sans",
        "source": "theme.tokens.json:588",
        "value": "'Inter', -apple-system, ...",
        "impact": "MEDIUM - UI font"
      },
      {
        "name": "stars.count",
        "source": "appearance.tokens.json:298",
        "value": 1500,
        "impact": "MEDIUM - starfield density"
      },
      {
        "name": "animation.hue.speed",
        "source": "appearance.tokens.json:455",
        "value": 0.0008,
        "impact": "MEDIUM - color animation speed"
      }
    ]
  },

  "wiring_status": {
    "TokenResolver": "IMPLEMENTED - src/core/viz/token_resolver.py",
    "CSS_injection": "WORKING - line 612 of visualize_graph_webgl.py",
    "JS_injection": "WORKING - line 617 of visualize_graph_webgl.py",
    "theme_switching": "SUPPORTED - data-theme attribute selector"
  },

  "bypass_categories": {
    "description": "Areas where code bypasses the token system",
    "categories": [
      {
        "name": "EDGE_COLOR_CONFIG",
        "location": "app.js:99-119",
        "type": "Hardcoded hex colors instead of token references",
        "severity": "MEDIUM",
        "fix": "Import from appearance.tokens.json color.edge"
      },
      {
        "name": "FLOW_PRESETS",
        "location": "app.js:7789",
        "type": "Hardcoded particle colors",
        "severity": "LOW",
        "fix": "Already tokenized in appearance.tokens.json flow-presets - wire the lookup"
      },
      {
        "name": "Legacy NODE_COLOR_MODE",
        "location": "app.js scattered",
        "type": "String constants instead of token lookup",
        "severity": "MEDIUM",
        "fix": "Use resolver.appearance() calls"
      },
      {
        "name": "ease-bounce",
        "location": "styles.css:2136",
        "type": "Hardcoded cubic-bezier instead of token",
        "severity": "LOW",
        "fix": "Add to layout.tokens.json easing section"
      }
    ]
  }
}
