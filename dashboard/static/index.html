<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè∞ Palace Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { background: #0a0a0a; color: #e0e0e0; }
        .card { background: #1a1a1a; border: 1px solid #333; }
        .card:hover { border-color: #555; }
        .butler-healthy { color: #10b981; }
        .butler-unhealthy { color: #ef4444; }
        .butler-unknown { color: #6b7280; }
        .auto-refresh { animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body class="p-4">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="card p-6 mb-4 rounded-lg">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold">üè∞ Palace Dashboard</h1>
                    <p class="text-gray-400">Real-time monitoring & control for PROJECT_elements</p>
                </div>
                <div class="text-right">
                    <div class="text-sm text-gray-400">Auto-refresh: <span class="auto-refresh">‚óè</span> 10s</div>
                    <div class="text-sm text-gray-400">Last update: <span id="last-update">--</span></div>
                </div>
            </div>
        </div>

        <!-- System Overview -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
            <div class="card p-4 rounded-lg">
                <div class="text-sm text-gray-400">Health Tier</div>
                <div class="text-2xl font-bold" id="health-tier">--</div>
            </div>
            <div class="card p-4 rounded-lg">
                <div class="text-sm text-gray-400">Stability</div>
                <div class="text-2xl font-bold" id="stability">--</div>
            </div>
            <div class="card p-4 rounded-lg">
                <div class="text-sm text-gray-400">Knowledge Chunks</div>
                <div class="text-2xl font-bold" id="chunk-count">--</div>
            </div>
            <div class="card p-4 rounded-lg">
                <div class="text-sm text-gray-400">Automation</div>
                <div class="text-2xl font-bold" id="automation-level">--</div>
            </div>
        </div>

        <!-- Main Content Tabs -->
        <div class="card p-6 rounded-lg">
            <!-- Tab Headers -->
            <div class="flex border-b border-gray-700 mb-4">
                <button class="tab-btn px-4 py-2 font-semibold border-b-2 border-blue-500" data-tab="butlers">
                    Butlers (26)
                </button>
                <button class="tab-btn px-4 py-2 font-semibold text-gray-400" data-tab="knowledge">
                    Knowledge Library
                </button>
                <button class="tab-btn px-4 py-2 font-semibold text-gray-400" data-tab="cloud">
                    Cloud Jobs
                </button>
                <button class="tab-btn px-4 py-2 font-semibold text-gray-400" data-tab="health">
                    Health Trends
                </button>
                <button class="tab-btn px-4 py-2 font-semibold text-gray-400" data-tab="files">
                    GCS Files
                </button>
            </div>

            <!-- Tab Contents -->
            <div id="tab-butlers" class="tab-content">
                <div id="butlers-list" class="space-y-2">
                    <div class="text-gray-400">Loading butlers...</div>
                </div>
            </div>

            <div id="tab-knowledge" class="tab-content hidden">
                <div class="mb-4">
                    <input
                        type="text"
                        id="search-input"
                        placeholder="Search 539K tokens of knowledge..."
                        class="w-full p-3 bg-gray-800 border border-gray-600 rounded-lg text-white"
                    />
                </div>
                <div id="search-results" class="space-y-3">
                    <div class="text-gray-400">Enter search query above</div>
                </div>
            </div>

            <div id="tab-cloud" class="tab-content hidden">
                <div id="cloud-jobs-list" class="space-y-3">
                    <div class="text-gray-400">Loading cloud jobs...</div>
                </div>
            </div>

            <div id="tab-health" class="tab-content hidden">
                <canvas id="health-chart" width="400" height="200"></canvas>
            </div>

            <div id="tab-files" class="tab-content hidden">
                <div class="mb-4">
                    <input
                        type="text"
                        id="path-input"
                        placeholder="Path (e.g., projectome/R0_raw/)"
                        class="w-full p-3 bg-gray-800 border border-gray-600 rounded-lg text-white"
                        value="projectome/"
                    />
                </div>
                <div id="files-list" class="space-y-2">
                    <div class="text-gray-400">Loading files...</div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
